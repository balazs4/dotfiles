git_protocol: ssh
aliases:
  prs: >-
    !gh api graphql -f query="
        {
          search(query: \"type:pr state:open ${1:-author}:${USER}\", type: ISSUE, first: 10) {
            edges {
              node {
                ... on PullRequest {
                  title url createdAt
                  reviews(first: 20){ nodes{ author{ ... on User{ login } } state } }
                  author{ ... on User{ login } }
                }
              }
            }
          }
        }" \
        | fx 'x => x.data.search.edges.map(xx => [xx.node.createdAt, xx.node.url.padEnd(40), xx.node.title.substring(0,80).padEnd(80), JSON.stringify(xx.node.reviews.nodes.reduce((acc,xxx) => {  acc[xxx.state] = 1 + (acc[xxx.state] || 0); return acc; }, {}))].join("\t")).join("\n")' \
        | sort \
        | fzf --reverse --height='32%' \
        | xurls \
        | xargs xdg-open
