#! /usr/bin/env node

const fs = require('fs');
const assert = require('assert');
assert.equal(process.env.PWD, process.env.HOME);

const [, , dotfile] = process.argv;

assert.ok(fs.existsSync(dotfile), `Not found: ${dotfile}`);

const splitted = dotfile.split('/').filter(x => x !== '.');

const result = splitted
  .reduce((acc, _, index) => {
    return [...acc, splitted.slice(0, index + 1).join('/')];
  }, [])
  .map(x => `!${x}`)
  .join('\n');

console.log(`
# ${dotfile}
${result}`);
